<?php

namespace App\Queries\Support\UserSupport;

use App\Models\TicketResponse;

class ShowResponseToUserQuery
{

    public static function getData($request)
    {

        $user_id = auth()->id();

        $ticket_response_id = $request->get('ticket_response_id');

        $response = TicketResponse::leftJoin('support_topics', 'ticket_responses.support_topic_id', '=', 'support_topics.id')
                                  ->leftJoin('support_tickets', 'ticket_responses.support_ticket_id', '=', 'support_tickets.id')
                                  ->where('ticket_responses.id', $ticket_response_id)
                                  ->orderBy('support_tickets.id', 'asc')
                                  ->first();

        $response->is_read = 1;

        $response->save();

        return $response;

    }

}