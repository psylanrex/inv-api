<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;
use App\Models\Status;
use Carbon\Carbon;

class Status extends Model
{
    use HasFactory;

    protected $fillable = [

        'status_name'

    ];

    protected $casts = [
        'created_at' => 'date:Y-m-d',
        'updated_at' => 'date:Y-m-d',
    ];

    public static function getStatusId($name)
    {

        $status = Status::where('status_name', $name)->first();

        return $status->id;


    }

    public static function setSuccessStatusId($success)
    {

        // for crons, we need to determine if the cron ran successfully
        // and return the correct status

        if ( $success == 1 ) {

           return $status_id = Status::getStatusId('completed');
            
        }

        return $status_id = Status::getStatusId('failed');


    }

    public static function getStatusNameFromId($id)
    {

        $status = Status::find($id);

        return $status->status_name;

    }


}
